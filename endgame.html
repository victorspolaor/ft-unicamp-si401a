<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fim do jogo</title>
    <link rel="stylesheet" href="styles/endgame.css"/>
</head>
<body>
<script src="session.js"></script>
<script src="util.js"></script>

<header class="header">
    <h1>GAME OVER</h1>
</header>

<div class="end-game">
    <img src="images/game/end-game-image.PNG" alt="End game"/>
</div>

<div class="container">
    <ul>
        <li>PONTUAÇÃO</li>
        <li id="score">99999</li>
        <li>LEVEL</li>
        <li id="level">21</li>
    </ul>
    <nav>
        <div class="menu">
            <a href="homepage.html"><span>Tela inicial</span></a>
        </div>
    </nav>
</div>

<footer>
    <div class="rodape">
        <p>
            Rolling Tetris é um projeto criado na UNICAMP para a disciplina SI401A
            - Programação para a Web
        </p>
    </div>
</footer>

<script>
    let score = getCookie('score');
    let level = getCookie('level');

    document.getElementById('score').innerHTML = score;
    document.getElementById('level').innerHTML = level;

    if (score > 0){
        let xml = new XMLHttpRequest();
        xml.onreadystatechange = function () {
            if (xml.readyState === 4) {
                if (xml.status === 500) {
                    window.alert(xml.response);
                }
            }
        };

        let formData = new FormData();
        formData.append("score", score);

        xml.open("POST", "top_score.php", false);
        xml.send(formData);
    }

</script>

</body>
</html>